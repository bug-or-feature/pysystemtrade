# YAML
# start_date: 2000-01-19
use_forecast_weight_estimates: False
use_instrument_weight_estimates: False
use_forecast_scale_estimates: False
use_forecast_div_mult_estimates: False
use_instrument_div_mult_estimates: False
#
#
#
#
# Raw data
#
#
# Trading rules
#
volatility_calculation:
  func: "sysquant.estimators.vol.mixed_vol_calc"
  days: 35
  min_periods: 10
  vol_abs_min: 0.0000000001
  slow_vol_years: 20
  proportion_of_slow_vol: 0.35
  backfill: True
#
trading_rules:
  carry10:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 10
  carry30:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 30
  carry60:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 60
  carry125:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 125
  momentum4:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 4
         Lslow: 16
  momentum8:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 8
         Lslow: 32
  momentum16:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 16
         Lslow: 64
  momentum32:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 32
         Lslow: 128
  momentum64:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 64
         Lslow: 256
  accel16:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 16
  accel32:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 32
  accel64:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 64
  breakout10:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 10
  breakout20:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 20
  breakout40:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 40
  breakout80:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 80
  breakout160:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 160
  breakout320:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 320
  normmom2:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 2
         Lslow: 8
  normmom4:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 4
         Lslow: 16
  normmom8:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 8
         Lslow: 32
  normmom16:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 16
         Lslow: 64
  normmom32:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 32
         Lslow: 128
  normmom64:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 64
         Lslow: 256

#
forecast_cap: 20.0
#
forecast_scalars:
  accel16: 7.6759225994693585
  accel32: 5.3347643128221085
  accel64: 3.6278373495463194
  breakout10: 0.7124878815135691
  breakout20: 0.7986982879195087
  breakout40: 0.828104233943375
  breakout80: 0.8491581048752734
  breakout160: 0.850191594352648
  breakout320: 0.8418667533932289
  carry10: 21.80285759891443
  carry30: 23.166615908332364
  carry60: 24.901032606912874
  carry125: 26.839077772549775
  momentum4: 10.292010239099067
  momentum8: 7.022014640044213
  momentum16: 4.74792669493723
  momentum32: 3.1791398979769436
  momentum64: 2.1603119041075742
  normmom2: 42.22705063220413
  normmom4: 28.78459513486178
  normmom8: 19.260226272955382
  normmom16: 12.898448623165972
  normmom32: 8.75682098964825
  normmom64: 5.967039006327134

#
# forecast combination
#
# Capital correction
#
percentage_vol_target: 25.0
notional_trading_capital: 1000000
base_currency: "GBP"

#
# Portfolio creation
#

forecast_weights:
  auto_weight_from_grouping:
    parameters:
      use_approx_DM: False
      apply_forecast_post_ceiling_cost_SR_before_weighting: True
    groups:
      convergent:
        weight: 0.4
        carry:
          weight: 1.0
          carry10: 0.25
          carry125: 0.25
          carry30: 0.25
          carry60: 0.25
      divergent:
        weight: 0.6
        speed1:
          weight: 0.1
          trend:
            weight: 1.0
            breakout10: 0.333
            normmom2: 0.333
            momentum4: 0.333
        speed2:
          weight: 0.18
          accel:
            weight: 0.4
            accel16: 1.0
          trend:
            weight: 0.6
            breakout20: 0.333
            normmom4: 0.333
            momentum8: 0.333
        speed3:
          weight: 0.18
          accel:
            weight: 0.4
            accel32: 1.0
          trend:
            weight: 0.6
            breakout40: 0.333
            normmom8: 0.333
            momentum16: 0.333
        speed4:
          weight: 0.18
          accel:
            weight: 0.4
            accel64: 1.0
          trend:
            weight: 0.6
            breakout80: 0.333
            normmom16: 0.333
            momentum32: 0.333
        speed5:
          weight: 0.18
          trend:
            weight: 1.0
            breakout160: 0.333
            normmom32: 0.333
            momentum64: 0.333
        speed6:
          weight: 0.18
          trend:
            weight: 1.0
            normmom64: 0.5
            breakout320: 0.5

#
instrument_weights:
  auto_weight_from_grouping:
    parameters:
      use_approx_DM: True
    groups:
      ags:
        weight: 0.143
        grain:
          weight: 0.333
          corn:
            weight: 0.2
            CORN_fsb: 1.0
          oats:
            weight: 0.2
            OATIES_fsb: 1.0
          rice:
            weight: 0.2
            RICE_fsb: 1.0
          soy:
            weight: 0.2
            SOYBEAN_fsb: 0.333
            SOYOIL_fsb: 0.333
            SOYMEAL_fsb: 0.333
          wheat:
            weight: 0.2
            WHEAT_fsb: 0.5
            WHEAT_ICE_fsb: 0.5
        meats:
          weight: 0.333
          LEANHOG_fsb: 0.5
          LIVECOW_fsb: 0.5
        softs:
          weight: 0.333
          cocoa:
            weight: 0.2
            COCOA_fsb: 0.5
            COCOA_LDN_fsb: 0.5
          coffee:
            weight: 0.2
            COFFEE_fsb: 0.5
            ROBUSTA_fsb: 0.5
          cotton:
            weight: 0.2
            COTTON2_fsb: 1.0
          juice:
            weight: 0.2
            OJ_fsb: 1.0
          sugar:
            weight: 0.2
            SUGAR11_fsb: 0.5
            SUGAR_WHITE_fsb: 0.5
      rates:
        weight: 0.143
        Americas:
          weight: 0.333
          govvie:
            weight: 0.6
            US2_fsb: 0.2
            US5_fsb: 0.2
            US10_fsb: 0.2
            US30Y_fsb: 0.2
            US30U_fsb: 0.2
          STIR:
            weight: 0.4
            FED_fsb: 1.0
        Asia:
          weight: 0.333
          JGB_fsb: 1.0
        EMEA:
          weight: 0.333
          eu:
            weight: 0.167
            EURIBOR-ICE_fsb: 1.0
          france:
            weight: 0.167
            OAT_fsb: 1.0
          germany:
            weight: 0.167
            BOBL_fsb: 0.25
            BUND_fsb: 0.25
            BUXL_fsb: 0.25
            SHATZ_fsb: 0.25
          italy:
            weight: 0.167
            BTP3_fsb: 0.5
            BTP_fsb: 0.5
          STIR:
            weight: 0.167
            SONIA3_fsb: 1.0
          uk:
            weight: 0.167
            GILT_fsb: 1.0
      equity:
        weight: 0.143
        Americas:
          weight: 0.333
          largecap:
            weight: 0.6
            DOW_fsb: 0.333
            SP500_fsb: 0.333
            NASDAQ_fsb: 0.333
          midcap:
            weight: 0.4
            RUSSELL_fsb: 1.0
        EMEA:
          weight: 0.333
          eu:
            weight: 0.125
            EUROSTX_fsb: 1.0
          france:
            weight: 0.125
            CAC_fsb: 1.0
          germany:
            weight: 0.125
            DAX_fsb: 1.0
          netherlands:
            weight: 0.125
            AEX_fsb: 1.0
          spain:
            weight: 0.125
            IBXEX_fsb: 1.0
          sweden:
            weight: 0.125
            OMXS30_fsb: 1.0
          switzerland:
            weight: 0.125
            SMI_fsb: 1.0
          uk:
            weight: 0.125
            FTSE100_fsb: 1.0
        Oceania:
          weight: 0.333
          australia:
            weight: 0.25
            ASX_fsb: 1.0
          hongkong:
            weight: 0.25
            HANG_fsb: 1.0
          japan:
            weight: 0.25
            NIKKEI_fsb: 1.0
          singapore:
            weight: 0.25
            MSCISING_fsb: 1.0
      fx:
        weight: 0.143
        AUD_fsb: 0.1
        AUDJPY_fsb: 0.1
        CAD_fsb: 0.1
        CHF_fsb: 0.1
        DX_fsb: 0.1
        EUR_fsb: 0.1
        EURGBP_fsb: 0.1
        GBP_fsb: 0.1
        JPY_fsb: 0.1
        NZD_fsb: 0.1
      metals:
        weight: 0.143
        industrial:
          weight: 0.4
          COPPER_fsb: 1.0
        precious:
          weight: 0.6
          GOLD_fsb: 0.25
          PALLAD_fsb: 0.25
          PLAT_fsb: 0.25
          SILVER_fsb: 0.25
      energies:
        weight: 0.143
        carbon:
          weight: 0.25
          EUA_fsb: 1.0
        gas:
          weight: 0.25
          GAS_US_fsb: 1.0
        oil:
          weight: 0.25
          BRENT_W_fsb: 0.5
          CRUDE_W_fsb: 0.5
        products:
          weight: 0.25
          GASOIL_fsb: 0.333
          GASOLINE_fsb: 0.333
          HEATOIL_fsb: 0.333
      vol:
        weight: 0.143
        V2X_fsb: 0.5
        VIX_fsb: 0.5

forecast_div_multiplier:
  AEX_fsb: 1.6752205295490035
  ASX_fsb: 1.4672461853481367
  AUDJPY_fsb: 1.4673203024558876
  AUD_fsb: 1.3894604895788722
  BOBL_fsb: 1.543621424434351
  BRENT_W_fsb: 1.6438306895695303
  BTP3_fsb: 1.4541369020600416
  BTP_fsb: 1.5869357603446863
  BUND_fsb: 1.6103282066506412
  BUXL_fsb: 1.6667259923758029
  CAC_fsb: 1.5045285618582893
  CAD_fsb: 1.4587502668787375
  CHF_fsb: 1.388640829490002
  COCOA_LDN_fsb: 1.5956800019435189
  COCOA_fsb: 1.7106154192622285
  COFFEE_fsb: 1.6161133485803942
  COPPER_fsb: 1.7353903149220302
  CORN_fsb: 1.5741752477366744
  COTTON2_fsb: 1.5222342139152523
  CRUDE_W_fsb: 1.6361138164350524
  DAX_fsb: 1.496244017067044
  DOW_fsb: 1.4610662410097404
  DX_fsb: 1.3993550084754658
  EUA_fsb: 1.5270207217398195
  EURIBOR-ICE_fsb: 1.7077350723079285
  EUROSTX_fsb: 1.706784704782437
  EUR_fsb: 1.4004635276997497
  FED_fsb: 1.4286398784128458
  FTSE100_fsb: 1.4699793096887905
  GASOIL_fsb: 1.610705336933131
  GASOLINE_fsb: 1.5518042808170849
  GAS_US_fsb: 1.5606311009785125
  GBP_fsb: 1.441124926878119
  GILT_fsb: 1.6393393301360828
  GOLD_fsb: 1.550285852800159
  HANG_fsb: 1.6737779963770028
  HEATOIL_fsb: 1.6225020418247313
  IBXEX_fsb: 1.5416136299832859
  JGB_fsb: 1.5441328611581118
  JPY_fsb: 1.4547499032148203
  LEANHOG_fsb: 1.5515496905667685
  LIVECOW_fsb: 1.5095243203933457
  MSCISING_fsb: 1.6657496473217577
  NASDAQ_fsb: 1.4750274406213808
  NIKKEI_fsb: 1.478002870963287
  NZD_fsb: 1.463963498777848
  OATIES_fsb: 1.3932696673309726
  OAT_fsb: 1.6045327100985014
  OJ_fsb: 1.591968539364134
  OMXS30_fsb: 1.6366865178852292
  PALLAD_fsb: 1.3960872754146127
  PLAT_fsb: 1.4530484667568973
  RICE_fsb: 1.5108987607543616
  ROBUSTA_fsb: 1.600194183442422
  RUSSELL_fsb: 1.4759433039478616
  SHATZ_fsb: 1.549245029774881
  SILVER_fsb: 1.4822644804016591
  SMI_fsb: 1.6920953282760982
  SONIA3_fsb: 1.516129936426928
  SOYBEAN_fsb: 1.5894428988593452
  SOYMEAL_fsb: 1.579785262380086
  SOYOIL_fsb: 1.6480390184351268
  SP500_fsb: 1.4630290566842425
  SUGAR11_fsb: 1.5742349719247724
  SUGAR_WHITE_fsb: 1.5785946486406006
  US10_fsb: 1.693580326930053
  US2_fsb: 1.551581349075492
  US30U_fsb: 1.6981491045628216
  US30Y_fsb: 1.696119899725007
  US5_fsb: 1.6246923988778719
  V2X_fsb: 1.3463870633849353
  VIX_fsb: 1.4986152195193456
  WHEAT_ICE_fsb: 1.3628857344685426
  WHEAT_fsb: 1.581590054899753

instrument_div_multiplier: 2.5
#

# buffering / position inertia
buffer_method: forecast
buffer_size: 0.10
buffer_trade_to_edge: True
# costs and accounting
use_SR_costs: True
vol_normalise_currency_costs: True
multiply_roll_costs_by: 0.5

exclude_instrument_lists:
  # ignore_instruments are ignored in backtests
  # we still collect price data for them in production, do rolls etc
  # You can override this by modifying the backtest config .yaml file used in either sim or production
  # If you want to ignore because a duplicate market, use duplicate_instruments
  # If you want to include in sim data, but not actually trade, use trading_restrictions
  #
  # BEST FOR INSTRUMENTS THAT LOOK EXPENSIVE, BUT WHERE WE HAVEN'T GOT ACCURATE DATA YET
  #
  # REVIEW REGULARLY AND CHECK THESE INSTRUMENTS AREN'T BETTER ELSEWHERE...
  ignore_instruments:
    - CHFJPY_fsb
    - EURCAD_fsb
    - EURCHF_fsb
    - EURGBP_fsb
    - GAS_NL_fsb
    - GAS_UK_fsb
    - GBPCHF_fsb
    - GBPJPY_fsb
    - JSE40_fsb
    - LUMBER_fsb
    - LUMBER-new_fsb
    - NOK_fsb
    - SEK_fsb
    - SOFR_fsb
    - V2X
    - VIX

  bad_markets:
    - BOBL_fsb
    - BTP3_fsb
    - EURGBP_fsb
    - EURIBOR-ICE_fsb
    - FED_fsb
    - JGB_fsb
    - JPY_fsb
    - MSCISING_fsb
    - OATIES_fsb
    - SHATZ_fsb
    - SONIA3_fsb
    - US2_fsb
    - US5_fsb
    - V2X_fsb
