# YAML
# start_date: 2000-01-19
use_forecast_weight_estimates: False
use_instrument_weight_estimates: False
use_forecast_scale_estimates: False

use_forecast_div_mult_estimates: False
use_instrument_div_mult_estimates: False
#
#
#
#
# Raw data
#
#
# Trading rules
#
volatility_calculation:
  func: "sysquant.estimators.vol.mixed_vol_calc"
  days: 35
  min_periods: 10
  vol_abs_min: 0.0000000001
  slow_vol_years: 20
  proportion_of_slow_vol: 0.35
  backfill: True
#
trading_rules:
  carry10:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 10
  carry30:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 30
  carry60:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 60
  carry125:
     function: systems.provided.rules.carry.carry
     data:
         - "rawdata.raw_carry"
     other_args:
         smooth_days: 125
  momentum4:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 4
         Lslow: 16
  momentum8:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 8
         Lslow: 32
  momentum16:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 16
         Lslow: 64
  momentum32:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 32
         Lslow: 128
  momentum64:
     function: systems.provided.rules.ewmac.ewmac
     data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
     other_args:
         Lfast: 64
         Lslow: 256
  accel16:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 16
  accel32:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 32
  accel64:
    function: systems.provided.rules.accel.accel
    data:
         - "rawdata.get_daily_prices"
         - "rawdata.daily_returns_volatility"
    other_args:
         Lfast: 64
  breakout10:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 10
  breakout20:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 20
  breakout40:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 40
  breakout80:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 80
  breakout160:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 160
  breakout320:
    function: systems.provided.rules.breakout.breakout
    data:
      - "rawdata.get_daily_prices"
    other_args:
      lookback: 320
  normmom2:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 2
         Lslow: 8
  normmom4:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 4
         Lslow: 16
  normmom8:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 8
         Lslow: 32
  normmom16:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 16
         Lslow: 64
  normmom32:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 32
         Lslow: 128
  normmom64:
     function: systems.provided.rules.ewmac.ewmac_calc_vol
     data:
         - "rawdata.get_cumulative_daily_vol_normalised_returns"
     other_args:
         Lfast: 64
         Lslow: 256
#
forecast_cap: 20.0
#
forecast_scalars:
  momentum4: 9.64110105510109
  momentum8: 6.83483272250168
  momentum16: 4.873798925900704
  momentum32: 3.496509469611604
  momentum64: 2.5317746215404915
  carry10: 36.65709734262937
  carry30: 38.80993693337063
  carry60: 41.807652257796114
  carry125: 47.008219995718825
  accel16: 7.0519319276977
  accel32: 5.072172102407444
  accel64: 3.60483366065117
  breakout10: 0.722373559146361
  breakout20: 0.8124857828766572
  breakout40: 0.8568291290017438
  breakout80: 0.9074682933671988
  breakout160: 0.9347237539327788
  breakout320: 0.971560452159631
  normmom2: 36.75850590424999
  normmom4: 26.656700766302258
  normmom8: 19.154360155780516
  normmom16: 13.772394219465061
  normmom32: 9.734263162083103
  normmom64: 6.494354666335101
#
# forecast combination
#
# Capital correction
#
percentage_vol_target: 25.0
# notional_trading_capital: 50000
base_currency: "GBP"

#
# Portfolio creation
#

forecast_weights:
  auto_weight_from_grouping:
    parameters:
      use_approx_DM: False
      apply_forecast_post_ceiling_cost_SR_before_weighting: True
    groups:
      convergent:
        weight: 0.4
        carry:
          weight: 1.0
          carry10: 0.25
          carry125: 0.25
          carry30: 0.25
          carry60: 0.25
      divergent:
        weight: 0.6
        speed1:
          weight: 0.1
          trend:
            weight: 1.0
            breakout10: 0.333
            normmom2: 0.333
            momentum4: 0.333
        speed2:
          weight: 0.18
          accel:
            weight: 0.4
            accel16: 1.0
          trend:
            weight: 0.6
            breakout20: 0.333
            normmom4: 0.333
            momentum8: 0.333
        speed3:
          weight: 0.18
          accel:
            weight: 0.4
            accel32: 1.0
          trend:
            weight: 0.6
            breakout40: 0.333
            normmom8: 0.333
            momentum16: 0.333
        speed4:
          weight: 0.18
          accel:
            weight: 0.4
            accel64: 1.0
          trend:
            weight: 0.6
            breakout80: 0.333
            normmom16: 0.333
            momentum32: 0.333
        speed5:
          weight: 0.18
          trend:
            weight: 1.0
            breakout160: 0.333
            normmom32: 0.333
            momentum64: 0.333
        speed6:
          weight: 0.18
          trend:
            weight: 1.0
            normmom64: 0.5
            breakout320: 0.5

#instruments:
#  - LEANHOG_fsb
#  - IBXEX_fsb
#  - GOLD_fsb
#  - DX_fsb
#  - US10_fsb
#  - COCOA_LDN_fsb
#  - FTSE100_fsb
#  - ROBUSTA_fsb
#  - HANG_fsb
#  - SP500_fsb
#  - AEX_fsb
#  - OAT_fsb
#  - NZD_fsb
#  - BUND_fsb
#  - SILVER_fsb
#  - BTP_fsb
#  - SMI_fsb
#  - GILT_fsb
#  - AUD_fsb
#  - EUROSTX_fsb
#  - WHEAT_ICE_fsb
#  - CHF_fsb
#  - PLAT_fsb
#  - COPPER_fsb
#  - DOW_fsb
#  - US30Y_fsb
#  - CAD_fsb
#  - EUR_fsb
#  - EUA_fsb
#  - RUSSELL_fsb
#  - ASX_fsb
#  - COCOA_fsb
#  - AUDJPY_fsb
#  - COTTON2_fsb
#  - CORN_fsb
#  - CAC_fsb
#  - SUGAR_WHITE_fsb
#  - GBP_fsb
#  - US30U_fsb
#  - LIVECOW_fsb
#  - DAX_fsb
#  - OMXS30_fsb
#  - PALLAD_fsb
#  - SOYBEAN_fsb
#  - NASDAQ_fsb
#  - GAS_US_fsb
#  - BUXL_fsb
#  - SOYOIL_fsb
#  - RICE_fsb
#  - SUGAR11_fsb
#  - SOYMEAL_fsb
#  - BRENT_W_fsb
#  - CRUDE_W_fsb
#  - NIKKEI_fsb
#  - GASOIL_fsb
#  - WHEAT_fsb
#  - COFFEE_fsb
#  - GASOLINE_fsb
#  - HEATOIL_fsb
#  - OJ_fsb
#  - JPY_fsb
#  -
#  - LEANHOG_fsb
#  - DOW_fsb
#  - US10_fsb
#  - GOLD_fsb
#  - PALLAD_fsb
#  - SOYBEAN_fsb
#  - CORN_fsb
#  - WHEAT_fsb
#  - VIX_fsb

#

exclude_instrument_lists:
  # ignore_instruments are ignored in backtests
  # we still collect price data for them in production, do rolls etc
  # You can override this by modifying the backtest config .yaml file used in either sim or production
  # If you want to ignore because a duplicate market, use duplicate_instruments
  # If you want to include in sim data, but not actually trade, use trading_restrictions
  #
  # BEST FOR INSTRUMENTS THAT LOOK EXPENSIVE, BUT WHERE WE HAVEN'T GOT ACCURATE DATA YET
  #
  # REVIEW REGULARLY AND CHECK THESE INSTRUMENTS AREN'T BETTER ELSEWHERE...
  ignore_instruments:
    - CHFJPY_fsb
    - EURCAD_fsb
    - EURCHF_fsb
    - EURGBP_fsb
    - EURIBOR_fsb
    - EURIBOR-ICE_fsb
    - GAS_NL_fsb
    - GAS_UK_fsb
    - GBPCHF_fsb
    - GBPJPY_fsb
    - JSE40_fsb
    - LUMBER_fsb
    - LUMBER-new_fsb
    - LUMBER_new_fsb
    - NOK_fsb
    - SEK_fsb
    - SOFR_fsb

  bad_markets:
    - BOBL_fsb
    - BRENT
    - BTP3_fsb
    - EURGBP_fsb
    - FED_fsb
    - JGB_fsb
    - JPY_fsb
    - MSCISING_fsb
    - OATIES_fsb
    - SHATZ_fsb
    - SONIA3_fsb
    - US2_fsb
    - V2X_fsb
    - VIX_fsb
    - WHEAT_ICE_fsb
